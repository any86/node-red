<!-- 节点注册脚本 -->
<script type="text/javascript">
    RED.nodes.registerType('custom-function', {
        category: 'function', // 归属到 function 分类
        color: '#a6bbcf', // 节点颜色（与同分类节点保持一致）
        defaults: {
            name: { value: "" } // 节点名称配置项
        },
        inputs: 1, // 输入端口数量
        outputs: 1, // 输出端口数量
        icon: "function.png", // 节点图标（可复用现有图标）
        label: function() {
            return this.name || "custom-function"; // 节点显示名称
        }
    });
</script>

<!-- 节点配置表单 -->
<script type="text/html" data-template-name="custom-function">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> 名称</label>
        <input type="text" id="node-input-name" placeholder="自定义函数节点">
    </div>
    <!-- 可添加更多配置项，如输入框、下拉框等 -->
</script>

<!-- 节点帮助信息 -->
<script type="text/html" data-help-name="custom-function">
    <p>这是一个自定义函数节点，用于在消息 payload 前添加前缀。</p>
    <h3>输入</h3>
    <p>任意包含 payload 的消息。</p>
    <h3>输出</h3>
    <p>payload 前添加 "[custom] " 前缀的消息。</p>
</script>